{"ast":null,"code":"import _objectSpread from\"/Users/fvirzi/GitHub/clinic-system-cloud/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import axios from'axios';import{BarChart,Bar,Tooltip,ResponsiveContainer}from'recharts';import{Search,Filter,User,Calendar,CheckCircle,Clock,XCircle,FileText,LogOut,Upload,Activity,ArrowLeft,Settings,Lock}from'lucide-react';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'./App.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:8000';// --- LISTA SPECIALIZZAZIONI (Unica fonte di veritÃ ) ---\nconst SPECIALIZATIONS=[\"Cardiologia\",\"Dermatologia\",\"Ortopedia\",\"Pediatria\",\"Oculistica\",\"Ginecologia\",\"Neurologia\",\"Psichiatria\",\"Urologia\",\"Otorinolaringoiatria\",\"Gastroenterologia\",\"Endocrinologia\",\"Medicina Generale\"];const getErrorMessage=error=>{var _error$response$data;if(!error.response)return'Errore di rete o server non raggiungibile';return((_error$response$data=error.response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Errore imprevisto';};function App(){const[token,setToken]=useState(localStorage.getItem('token'));const[user,setUser]=useState(JSON.parse(localStorage.getItem('user')||'null'));const[showLogin,setShowLogin]=useState(false);useEffect(()=>{if(token){axios.defaults.headers.common['Authorization']=token;axios.get(\"\".concat(API_URL,\"/api/users/me\")).then(res=>{setUser(res.data);localStorage.setItem('user',JSON.stringify(res.data));}).catch(()=>logout());}},[token]);const login=(newToken,newUser)=>{setToken(newToken);setUser(newUser);localStorage.setItem('token',newToken);localStorage.setItem('user',JSON.stringify(newUser));axios.defaults.headers.common['Authorization']=newToken;setShowLogin(false);};const logout=()=>{setToken(null);setUser(null);localStorage.removeItem('token');localStorage.removeItem('user');delete axios.defaults.headers.common['Authorization'];setShowLogin(false);};if(token&&user){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\",autoClose:3000}),user.role==='patient'?/*#__PURE__*/_jsx(PatientDashboard,{user:user,onLogout:logout}):/*#__PURE__*/_jsx(DoctorDashboardAdvanced,{user:user,onLogout:logout})]});}if(showLogin)return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(LoginPage,{onLogin:login,onBack:()=>setShowLogin(false)})]});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(HomePage,{onEnter:()=>setShowLogin(true)})]});}// ============================================\n// 0. HOMEPAGE (Generica e Professionale)\n// ============================================\nfunction HomePage(_ref){let{onEnter}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"homepage\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"landing-navbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"brand\",children:[/*#__PURE__*/_jsx(Activity,{}),\" Clinica San Marco\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline\",onClick:onEnter,children:\"Area Riservata\"})]}),/*#__PURE__*/_jsxs(\"header\",{className:\"hero-section\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"La tua salute,\",/*#__PURE__*/_jsx(\"br\",{}),\"la nostra priorit\\xE0.\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Prenotazioni online immediate, referti digitali e un team di specialisti sempre al tuo fianco.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-cta\",onClick:onEnter,children:\"Prenota Ora\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"features-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Perch\\xE9 Sceglierci\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"features-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feature-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:\"\\uD83E\\uDE7A\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Team Multidisciplinare\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Oltre 15 specializzazioni mediche, dalla Cardiologia alla Pediatria, per un'assistenza completa.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"feature-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:\"\\u26A1\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Zero Code\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Dimentica le attese. Scegli il medico, l'orario e prenota online 24/7 in autonomia.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"feature-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:\"\\uD83D\\uDCF1\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Tutto Digitale\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Gestisci i tuoi appuntamenti e scarica i referti medici direttamente dal tuo computer.\"})]})]})]})]});}function LoginPage(_ref2){let{onLogin,onBack}=_ref2;const[isLogin,setIsLogin]=useState(true);const[formData,setFormData]=useState({email:'',password:'',role:'patient',name:'',surname:'',phone:'',specialization:''});const[loading,setLoading]=useState(false);const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{if(isLogin){const res=await axios.post(\"\".concat(API_URL,\"/api/auth/login\"),{email:formData.email,password:formData.password});onLogin(res.data.token,res.data.user);}else{await axios.post(\"\".concat(API_URL,\"/api/auth/register\"),_objectSpread(_objectSpread({},formData),{},{specialization:formData.role==='doctor'?formData.specialization:null}));toast.success('Registrato! Ora accedi.');setIsLogin(true);}}catch(error){toast.error(getErrorMessage(error));}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onBack,className:\"back-link\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:16}),\" Indietro\"]}),/*#__PURE__*/_jsx(\"h1\",{children:isLogin?'Accedi':'Registrati'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[!isLogin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Nome\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Cognome\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{surname:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Telefono\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{phone:e.target.value})),required:true}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{role:e.target.value})),value:formData.role,children:[/*#__PURE__*/_jsx(\"option\",{value:\"patient\",children:\"Sono un Paziente\"}),/*#__PURE__*/_jsx(\"option\",{value:\"doctor\",children:\"Sono un Medico\"})]}),formData.role==='doctor'&&/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{specialization:e.target.value})),required:true,defaultValue:\"\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Seleziona Specializzazione\"}),SPECIALIZATIONS.map(spec=>/*#__PURE__*/_jsx(\"option\",{value:spec,children:spec},spec))]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{password:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"btn-primary\",children:loading?'...':isLogin?'Entra':'Registrati'})]}),/*#__PURE__*/_jsx(\"p\",{className:\"toggle-link\",onClick:()=>setIsLogin(!isLogin),children:isLogin?'Non hai un account? Registrati':'Hai giÃ  un account? Accedi'})]})});}// ============================================\n// 2. DASHBOARD MEDICO\n// ============================================\nfunction DoctorDashboardAdvanced(_ref3){let{user,onLogout}=_ref3;const[view,setView]=useState('dashboard');const[appointments,setAppointments]=useState([]);const[filteredAppts,setFilteredAppts]=useState([]);const[searchTerm,setSearchTerm]=useState(\"\");const[statusFilter,setStatusFilter]=useState(\"all\");const[uploadModal,setUploadModal]=useState(null);const fetchData=async()=>{try{const res=await axios.get(\"\".concat(API_URL,\"/api/appointments/my\"));setAppointments(res.data);setFilteredAppts(res.data);}catch(error){toast.error(\"Errore caricamento dati\");}};useEffect(()=>{fetchData();},[]);useEffect(()=>{let result=appointments;if(searchTerm)result=result.filter(a=>{var _a$patient_name;return(_a$patient_name=a.patient_name)===null||_a$patient_name===void 0?void 0:_a$patient_name.toLowerCase().includes(searchTerm.toLowerCase());});if(statusFilter!==\"all\")result=result.filter(a=>a.status===statusFilter);setFilteredAppts(result);},[searchTerm,statusFilter,appointments]);const stats=useMemo(()=>({total:appointments.length,pending:appointments.filter(a=>a.status==='pending').length,today:appointments.filter(a=>a.date===new Date().toISOString().split('T')[0]).length}),[appointments]);const updateStatus=async(id,status)=>{try{await axios.patch(\"\".concat(API_URL,\"/api/appointments/\").concat(id,\"/status\"),null,{params:{status}});toast.success(\"Stato aggiornato\");fetchData();}catch(e){toast.error(\"Errore\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"brand\",children:[/*#__PURE__*/_jsx(Activity,{}),\" Portale Medici\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-menu\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Dr. \",user.surname]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,children:\"Esci\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:view==='dashboard'?'active':'',onClick:()=>setView('dashboard'),children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{className:view==='profile'?'active':'',onClick:()=>setView('profile'),children:\"Profilo\"})]}),view==='dashboard'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-grid\",children:[/*#__PURE__*/_jsx(StatCard,{title:\"Totale\",value:stats.total,icon:/*#__PURE__*/_jsx(Calendar,{})}),/*#__PURE__*/_jsx(StatCard,{title:\"Da Accettare\",value:stats.pending,icon:/*#__PURE__*/_jsx(Clock,{})}),/*#__PURE__*/_jsx(StatCard,{title:\"Oggi\",value:stats.today,icon:/*#__PURE__*/_jsx(CheckCircle,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{marginBottom:'2rem',display:'flex',gap:'1rem',alignItems:'center'},children:[/*#__PURE__*/_jsx(Search,{size:20,color:\"#64748b\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Cerca paziente...\",style:{border:'none',outline:'none',flex:1},value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{style:{border:'1px solid #e2e8f0',padding:'5px',borderRadius:'5px'},value:statusFilter,onChange:e=>setStatusFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Tutti\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"\\uD83D\\uDFE1 In Attesa\"}),/*#__PURE__*/_jsx(\"option\",{value:\"confirmed\",children:\"\\uD83D\\uDFE2 Confermati\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{padding:0,overflow:'hidden'},children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:'#f8fafc',textAlign:'left'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:\"Paziente\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:\"Data\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:\"Stato\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'1rem'},children:\"Azioni\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredAppts.map(app=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid #f1f5f9'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem',fontWeight:'bold',color:'#2563eb'},children:app.patient_name}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'1rem'},children:[app.date,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:app.time_slot})]}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'1rem'},children:/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(app.status),children:app.status})}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'1rem'},children:[app.status==='pending'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-success\",onClick:()=>updateStatus(app.appointment_id,'confirmed'),children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-danger\",onClick:()=>updateStatus(app.appointment_id,'rejected'),children:\"\\u2717\"})]}),app.status==='confirmed'&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:()=>setUploadModal(app),children:\"Carica Referto\"})]})]},app.appointment_id))})]})})]}),view==='profile'&&/*#__PURE__*/_jsx(UserProfile,{user:user})]}),uploadModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',display:'flex',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{width:'500px',padding:'2rem'},children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Carica Referto per \",uploadModal.patient_name]}),/*#__PURE__*/_jsx(UploadForm,{appointment:uploadModal,onClose:()=>setUploadModal(null)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setUploadModal(null),style:{marginTop:'1rem',background:'none',border:'none',color:'#666',cursor:'pointer'},children:\"Chiudi\"})]})})]});}function UploadForm(_ref4){let{appointment,onClose}=_ref4;const[file,setFile]=useState(null);const[notes,setNotes]=useState('');const handleUpload=async e=>{e.preventDefault();const data=new FormData();data.append('file',file);const query=new URLSearchParams({appointment_id:appointment.appointment_id,exam_type:'Visita Specialistica',exam_date:new Date().toISOString().split('T')[0],notes:notes}).toString();try{await axios.post(\"\".concat(API_URL,\"/api/reports/upload?\").concat(query),data);toast.success(\"Referto caricato!\");onClose();}catch(err){toast.error(\"Errore upload\");}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpload,style:{display:'flex',flexDirection:'column',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>setFile(e.target.files[0]),required:true}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Note cliniche...\",value:notes,onChange:e=>setNotes(e.target.value),style:{width:'100%',padding:'10px',border:'1px solid #ddd'}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",children:\"Carica PDF\"})]});}function StatCard(_ref5){let{title,value,icon}=_ref5;return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'#64748b',fontSize:'0.9rem'},children:title}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.5rem',margin:0},children:value})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1.5rem',color:'#2563eb'},children:icon})]});}// ============================================\n// 3. DASHBOARD PAZIENTE\n// ============================================\nfunction PatientDashboard(_ref6){let{user,onLogout}=_ref6;const[view,setView]=useState('appointments');return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"brand\",style:{color:'#16a34a'},children:[/*#__PURE__*/_jsx(Activity,{}),\" Area Paziente\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-menu\",children:[/*#__PURE__*/_jsx(\"span\",{children:user.name}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,children:\"Esci\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:view==='appointments'?'active':'',onClick:()=>setView('appointments'),children:\"I miei Appuntamenti\"}),/*#__PURE__*/_jsx(\"button\",{className:view==='book'?'active':'',onClick:()=>setView('book'),children:\"Prenota Visita\"}),/*#__PURE__*/_jsx(\"button\",{className:view==='reports'?'active':'',onClick:()=>setView('reports'),children:\"I miei Referti\"}),/*#__PURE__*/_jsx(\"button\",{className:view==='profile'?'active':'',onClick:()=>setView('profile'),children:\"Profilo\"})]}),view==='appointments'&&/*#__PURE__*/_jsx(PatientAppointments,{}),view==='book'&&/*#__PURE__*/_jsx(BookAppointment,{onSuccess:()=>setView('appointments')}),view==='reports'&&/*#__PURE__*/_jsx(PatientReports,{}),view==='profile'&&/*#__PURE__*/_jsx(UserProfile,{user:user})]})]});}function PatientAppointments(){const[appointments,setAppointments]=useState([]);useEffect(()=>{axios.get(\"\".concat(API_URL,\"/api/appointments/my\")).then(res=>setAppointments(res.data));},[]);const cancel=async id=>{if(window.confirm(\"Cancellare?\")){await axios.delete(\"\".concat(API_URL,\"/api/appointments/\").concat(id));const res=await axios.get(\"\".concat(API_URL,\"/api/appointments/my\"));setAppointments(res.data);toast.info(\"Cancellato\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card-grid\",children:[appointments.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"Nessun appuntamento.\"}),appointments.map(a=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:a.doctor_name}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#666'},children:a.specialization}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCC5 \",a.date,\" ore \",a.time_slot]}),/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(a.status),children:a.status}),a.status==='pending'&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-danger\",style:{marginTop:'10px',width:'100%'},onClick:()=>cancel(a.appointment_id),children:\"Cancella\"})]},a.appointment_id))]});}function BookAppointment(_ref7){let{onSuccess}=_ref7;const[spec,setSpec]=useState('');const[doctors,setDoctors]=useState([]);const[selectedDoc,setSelectedDoc]=useState('');const[date,setDate]=useState('');const[slots,setSlots]=useState([]);const[selectedSlot,setSelectedSlot]=useState('');const[reason,setReason]=useState('');useEffect(()=>{if(spec)axios.get(\"\".concat(API_URL,\"/api/doctors?specialization=\").concat(spec)).then(res=>setDoctors(res.data));},[spec]);useEffect(()=>{if(selectedDoc&&date)axios.get(\"\".concat(API_URL,\"/api/doctors/\").concat(selectedDoc,\"/availability?date=\").concat(date)).then(res=>setSlots(res.data.available_slots));},[selectedDoc,date]);const submit=async e=>{e.preventDefault();try{await axios.post(\"\".concat(API_URL,\"/api/appointments\"),{doctor_id:selectedDoc,date,time_slot:selectedSlot,reason});toast.success(\"Prenotato!\");onSuccess();}catch(e){toast.error(\"Errore\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Nuova Prenotazione\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Specializzazione\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setSpec(e.target.value),defaultValue:\"\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Seleziona Specializzazione...\"}),SPECIALIZATIONS.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:s},s))]}),spec&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Medico\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setSelectedDoc(e.target.value),defaultValue:\"\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Seleziona Medico...\"}),doctors.map(d=>/*#__PURE__*/_jsxs(\"option\",{value:d.user_id,children:[d.name,\" \",d.surname]},d.user_id))]})]}),selectedDoc&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Data\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",onChange:e=>setDate(e.target.value)})]}),date&&/*#__PURE__*/_jsx(\"div\",{className:\"slots-grid\",children:slots.length>0?slots.map(s=>/*#__PURE__*/_jsx(\"div\",{className:\"slot \".concat(selectedSlot===s?'selected':''),onClick:()=>setSelectedSlot(s),children:s},s)):/*#__PURE__*/_jsx(\"p\",{children:\"Nessun posto disponibile.\"})}),selectedSlot&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Motivo\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Motivo visita\",onChange:e=>setReason(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",style:{marginTop:'10px'},children:\"Conferma\"})]})]})]});}function PatientReports(){const[reports,setReports]=useState([]);useEffect(()=>{axios.get(\"\".concat(API_URL,\"/api/reports/my\")).then(res=>setReports(res.data));},[]);const download=(id,name)=>{axios.get(\"\".concat(API_URL,\"/api/reports/\").concat(id,\"/download\"),{responseType:'blob'}).then(res=>{const url=window.URL.createObjectURL(new Blob([res.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',name);document.body.appendChild(link);link.click();});};return/*#__PURE__*/_jsxs(\"div\",{className:\"card-grid\",children:[reports.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"Nessun referto disponibile.\"}),reports.map(r=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDCC4 \",r.exam_type]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Medico: \",r.doctor_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Data: \",r.exam_date]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:()=>download(r.report_id,r.original_filename),children:\"Scarica PDF\"})]},r.report_id))]});}// ============================================\n// 4. PROFILO E CAMBIO PASSWORD\n// ============================================\nfunction UserProfile(_ref8){let{user}=_ref8;const[passData,setPassData]=useState({old_password:'',new_password:'',confirm_password:''});const[loading,setLoading]=useState(false);const handleChangePass=async e=>{e.preventDefault();if(passData.new_password!==passData.confirm_password){toast.error(\"Le nuove password non coincidono!\");return;}if(passData.new_password.length<6){toast.error(\"La password deve essere di almeno 6 caratteri\");return;}setLoading(true);try{await axios.post(\"\".concat(API_URL,\"/api/users/change-password\"),{old_password:passData.old_password,new_password:passData.new_password});toast.success(\"Password cambiata con successo!\");setPassData({old_password:'',new_password:'',confirm_password:''});}catch(err){toast.error(getErrorMessage(err));}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(350px, 1fr))',gap:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h3\",{style:{marginBottom:'1.5rem',display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(User,{size:20}),\" I Miei Dati\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.85rem',color:'#64748b',fontWeight:'bold'},children:\"Nome e Cognome\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:\"\".concat(user.name,\" \").concat(user.surname),disabled:true,style:{background:'#f1f5f9',cursor:'not-allowed',border:'1px solid #e2e8f0'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.85rem',color:'#64748b',fontWeight:'bold'},children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:user.email,disabled:true,style:{background:'#f1f5f9',cursor:'not-allowed',border:'1px solid #e2e8f0'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.85rem',color:'#64748b',fontWeight:'bold'},children:\"Telefono\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:user.phone,disabled:true,style:{background:'#f1f5f9',cursor:'not-allowed',border:'1px solid #e2e8f0'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.85rem',color:'#64748b',fontWeight:'bold'},children:\"Ruolo\"}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px',background:'#f1f5f9',borderRadius:'8px',border:'1px solid #e2e8f0',color:'#64748b'},children:user.role==='doctor'?\"Medico - \".concat(user.specialization):'Paziente'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h3\",{style:{marginBottom:'1.5rem',display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(Lock,{size:20}),\" Sicurezza\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleChangePass,children:[/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500'},children:\"Vecchia Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Inserisci la password attuale\",value:passData.old_password,onChange:e=>setPassData(_objectSpread(_objectSpread({},passData),{},{old_password:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500'},children:\"Nuova Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Minimo 6 caratteri\",value:passData.new_password,onChange:e=>setPassData(_objectSpread(_objectSpread({},passData),{},{new_password:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"label\",{style:{fontWeight:'500'},children:\"Conferma Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Ripeti la nuova password\",value:passData.confirm_password,onChange:e=>setPassData(_objectSpread(_objectSpread({},passData),{},{confirm_password:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:loading,style:{marginTop:'10px'},children:loading?'Aggiornamento...':'Aggiorna Password'})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useMemo","axios","BarChart","Bar","Tooltip","ResponsiveContainer","Search","Filter","User","Calendar","CheckCircle","Clock","XCircle","FileText","LogOut","Upload","Activity","ArrowLeft","Settings","Lock","ToastContainer","toast","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","SPECIALIZATIONS","getErrorMessage","error","_error$response$data","response","data","detail","App","token","setToken","localStorage","getItem","user","setUser","JSON","parse","showLogin","setShowLogin","defaults","headers","common","get","concat","then","res","setItem","stringify","catch","logout","login","newToken","newUser","removeItem","children","position","autoClose","role","PatientDashboard","onLogout","DoctorDashboardAdvanced","LoginPage","onLogin","onBack","HomePage","onEnter","_ref","className","onClick","_ref2","isLogin","setIsLogin","formData","setFormData","email","password","name","surname","phone","specialization","loading","setLoading","handleSubmit","e","preventDefault","post","_objectSpread","success","size","onSubmit","placeholder","onChange","target","value","required","defaultValue","disabled","map","spec","type","_ref3","view","setView","appointments","setAppointments","filteredAppts","setFilteredAppts","searchTerm","setSearchTerm","statusFilter","setStatusFilter","uploadModal","setUploadModal","fetchData","result","filter","a","_a$patient_name","patient_name","toLowerCase","includes","status","stats","total","length","pending","today","date","Date","toISOString","split","updateStatus","id","patch","params","StatCard","title","icon","style","marginBottom","display","gap","alignItems","color","border","outline","flex","padding","borderRadius","overflow","background","textAlign","app","borderBottom","fontWeight","time_slot","appointment_id","UserProfile","top","left","right","bottom","justifyContent","width","UploadForm","appointment","onClose","marginTop","cursor","_ref4","file","setFile","notes","setNotes","handleUpload","FormData","append","query","URLSearchParams","exam_type","exam_date","toString","err","flexDirection","files","_ref5","fontSize","margin","_ref6","PatientAppointments","BookAppointment","onSuccess","PatientReports","cancel","window","confirm","delete","info","doctor_name","_ref7","setSpec","doctors","setDoctors","selectedDoc","setSelectedDoc","setDate","slots","setSlots","selectedSlot","setSelectedSlot","reason","setReason","available_slots","submit","doctor_id","s","d","user_id","reports","setReports","download","responseType","url","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","r","report_id","original_filename","_ref8","passData","setPassData","old_password","new_password","confirm_password","handleChangePass","gridTemplateColumns"],"sources":["/Users/fvirzi/GitHub/clinic-system-cloud/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport axios from 'axios';\nimport { BarChart, Bar, Tooltip, ResponsiveContainer } from 'recharts';\nimport { Search, Filter, User, Calendar, CheckCircle, Clock, XCircle, FileText, LogOut, Upload, Activity, ArrowLeft, Settings, Lock } from 'lucide-react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n// --- LISTA SPECIALIZZAZIONI (Unica fonte di veritÃ ) ---\nconst SPECIALIZATIONS = [\n    \"Cardiologia\", \"Dermatologia\", \"Ortopedia\", \"Pediatria\", \"Oculistica\",\n    \"Ginecologia\", \"Neurologia\", \"Psichiatria\", \"Urologia\",\n    \"Otorinolaringoiatria\", \"Gastroenterologia\", \"Endocrinologia\", \"Medicina Generale\"\n];\n\nconst getErrorMessage = (error) => {\n    if (!error.response) return 'Errore di rete o server non raggiungibile';\n    return error.response.data?.detail || 'Errore imprevisto';\n};\n\nfunction App() {\n    const [token, setToken] = useState(localStorage.getItem('token'));\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('user') || 'null'));\n    const [showLogin, setShowLogin] = useState(false);\n\n    useEffect(() => {\n        if (token) {\n            axios.defaults.headers.common['Authorization'] = token;\n            axios.get(`${API_URL}/api/users/me`)\n                .then(res => { setUser(res.data); localStorage.setItem('user', JSON.stringify(res.data)); })\n                .catch(() => logout());\n        }\n    }, [token]);\n\n    const login = (newToken, newUser) => {\n        setToken(newToken);\n        setUser(newUser);\n        localStorage.setItem('token', newToken);\n        localStorage.setItem('user', JSON.stringify(newUser));\n        axios.defaults.headers.common['Authorization'] = newToken;\n        setShowLogin(false);\n    };\n\n    const logout = () => {\n        setToken(null); setUser(null);\n        localStorage.removeItem('token'); localStorage.removeItem('user');\n        delete axios.defaults.headers.common['Authorization'];\n        setShowLogin(false);\n    };\n\n    if (token && user) {\n        return (\n            <>\n                <ToastContainer position=\"top-right\" autoClose={3000} />\n                {user.role === 'patient'\n                    ? <PatientDashboard user={user} onLogout={logout} />\n                    : <DoctorDashboardAdvanced user={user} onLogout={logout} />\n                }\n            </>\n        );\n    }\n\n    if (showLogin) return <><ToastContainer /><LoginPage onLogin={login} onBack={() => setShowLogin(false)} /></>;\n\n    return <><ToastContainer /><HomePage onEnter={() => setShowLogin(true)} /></>;\n}\n\n// ============================================\n// 0. HOMEPAGE (Generica e Professionale)\n// ============================================\n\nfunction HomePage({ onEnter }) {\n    return (\n        <div className=\"homepage\">\n            <nav className=\"landing-navbar\">\n                <div className=\"brand\"><Activity /> Clinica San Marco</div>\n                <button className=\"btn-outline\" onClick={onEnter}>Area Riservata</button>\n            </nav>\n\n            <header className=\"hero-section\">\n                <h1>La tua salute,<br />la nostra prioritÃ .</h1>\n                <p>Prenotazioni online immediate, referti digitali e un team di specialisti sempre al tuo fianco.</p>\n                <button className=\"btn-cta\" onClick={onEnter}>Prenota Ora</button>\n            </header>\n\n            <section className=\"features-section\">\n                <h2>PerchÃ© Sceglierci</h2>\n                <div className=\"features-grid\">\n                    <div className=\"feature-card\">\n                        <div className=\"icon\">ðŸ©º</div>\n                        <h3>Team Multidisciplinare</h3>\n                        <p>Oltre 15 specializzazioni mediche, dalla Cardiologia alla Pediatria, per un'assistenza completa.</p>\n                    </div>\n                    <div className=\"feature-card\">\n                        <div className=\"icon\">âš¡</div>\n                        <h3>Zero Code</h3>\n                        <p>Dimentica le attese. Scegli il medico, l'orario e prenota online 24/7 in autonomia.</p>\n                    </div>\n                    <div className=\"feature-card\">\n                        <div className=\"icon\">ðŸ“±</div>\n                        <h3>Tutto Digitale</h3>\n                        <p>Gestisci i tuoi appuntamenti e scarica i referti medici direttamente dal tuo computer.</p>\n                    </div>\n                </div>\n            </section>\n        </div>\n    );\n}\n\nfunction LoginPage({ onLogin, onBack }) {\n    const [isLogin, setIsLogin] = useState(true);\n    const [formData, setFormData] = useState({ email: '', password: '', role: 'patient', name: '', surname: '', phone: '', specialization: '' });\n    const [loading, setLoading] = useState(false);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setLoading(true);\n        try {\n            if (isLogin) {\n                const res = await axios.post(`${API_URL}/api/auth/login`, { email: formData.email, password: formData.password });\n                onLogin(res.data.token, res.data.user);\n            } else {\n                await axios.post(`${API_URL}/api/auth/register`, { ...formData, specialization: formData.role === 'doctor' ? formData.specialization : null });\n                toast.success('Registrato! Ora accedi.');\n                setIsLogin(true);\n            }\n        } catch (error) { toast.error(getErrorMessage(error)); } finally { setLoading(false); }\n    };\n\n    return (\n        <div className=\"login-container\">\n            <div className=\"login-box\">\n                <button onClick={onBack} className=\"back-link\"><ArrowLeft size={16} /> Indietro</button>\n                <h1>{isLogin ? 'Accedi' : 'Registrati'}</h1>\n                <form onSubmit={handleSubmit}>\n                    {!isLogin && (\n                        <>\n                            <input placeholder=\"Nome\" onChange={e => setFormData({ ...formData, name: e.target.value })} required />\n                            <input placeholder=\"Cognome\" onChange={e => setFormData({ ...formData, surname: e.target.value })} required />\n                            <input placeholder=\"Telefono\" onChange={e => setFormData({ ...formData, phone: e.target.value })} required />\n\n                            <select onChange={e => setFormData({ ...formData, role: e.target.value })} value={formData.role}>\n                                <option value=\"patient\">Sono un Paziente</option>\n                                <option value=\"doctor\">Sono un Medico</option>\n                            </select>\n\n                            {formData.role === 'doctor' && (\n                                <select onChange={e => setFormData({ ...formData, specialization: e.target.value })} required defaultValue=\"\">\n                                    <option value=\"\" disabled>Seleziona Specializzazione</option>\n                                    {SPECIALIZATIONS.map(spec => <option key={spec} value={spec}>{spec}</option>)}\n                                </select>\n                            )}\n                        </>\n                    )}\n                    <input type=\"email\" placeholder=\"Email\" onChange={e => setFormData({ ...formData, email: e.target.value })} required />\n                    <input type=\"password\" placeholder=\"Password\" onChange={e => setFormData({ ...formData, password: e.target.value })} required />\n                    <button type=\"submit\" disabled={loading} className=\"btn-primary\">{loading ? '...' : (isLogin ? 'Entra' : 'Registrati')}</button>\n                </form>\n                <p className=\"toggle-link\" onClick={() => setIsLogin(!isLogin)}>{isLogin ? 'Non hai un account? Registrati' : 'Hai giÃ  un account? Accedi'}</p>\n            </div>\n        </div>\n    );\n}\n\n// ============================================\n// 2. DASHBOARD MEDICO\n// ============================================\n\nfunction DoctorDashboardAdvanced({ user, onLogout }) {\n    const [view, setView] = useState('dashboard');\n    const [appointments, setAppointments] = useState([]);\n    const [filteredAppts, setFilteredAppts] = useState([]);\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const [statusFilter, setStatusFilter] = useState(\"all\");\n    const [uploadModal, setUploadModal] = useState(null);\n\n    const fetchData = async () => {\n        try {\n            const res = await axios.get(`${API_URL}/api/appointments/my`);\n            setAppointments(res.data);\n            setFilteredAppts(res.data);\n        } catch (error) { toast.error(\"Errore caricamento dati\"); }\n    };\n\n    useEffect(() => { fetchData(); }, []);\n\n    useEffect(() => {\n        let result = appointments;\n        if (searchTerm) result = result.filter(a => a.patient_name?.toLowerCase().includes(searchTerm.toLowerCase()));\n        if (statusFilter !== \"all\") result = result.filter(a => a.status === statusFilter);\n        setFilteredAppts(result);\n    }, [searchTerm, statusFilter, appointments]);\n\n    const stats = useMemo(() => ({\n        total: appointments.length,\n        pending: appointments.filter(a => a.status === 'pending').length,\n        today: appointments.filter(a => a.date === new Date().toISOString().split('T')[0]).length\n    }), [appointments]);\n\n    const updateStatus = async (id, status) => {\n        try {\n            await axios.patch(`${API_URL}/api/appointments/${id}/status`, null, { params: { status } });\n            toast.success(`Stato aggiornato`);\n            fetchData();\n        } catch (e) { toast.error(\"Errore\"); }\n    };\n\n    return (\n        <div className=\"dashboard\">\n            <nav className=\"navbar\">\n                <div className=\"brand\"><Activity /> Portale Medici</div>\n                <div className=\"user-menu\"><span>Dr. {user.surname}</span><button onClick={onLogout}>Esci</button></div>\n            </nav>\n\n            <div className=\"container\">\n                <div className=\"tabs\">\n                    <button className={view === 'dashboard' ? 'active' : ''} onClick={() => setView('dashboard')}>Dashboard</button>\n                    <button className={view === 'profile' ? 'active' : ''} onClick={() => setView('profile')}>Profilo</button>\n                </div>\n\n                {view === 'dashboard' && (\n                    <>\n                        <div className=\"card-grid\">\n                            <StatCard title=\"Totale\" value={stats.total} icon={<Calendar />} />\n                            <StatCard title=\"Da Accettare\" value={stats.pending} icon={<Clock />} />\n                            <StatCard title=\"Oggi\" value={stats.today} icon={<CheckCircle />} />\n                        </div>\n\n                        <div className=\"card\" style={{ marginBottom: '2rem', display: 'flex', gap: '1rem', alignItems: 'center' }}>\n                            <Search size={20} color=\"#64748b\" />\n                            <input type=\"text\" placeholder=\"Cerca paziente...\" style={{ border: 'none', outline: 'none', flex: 1 }} value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />\n                            <select style={{ border: '1px solid #e2e8f0', padding: '5px', borderRadius: '5px' }} value={statusFilter} onChange={(e) => setStatusFilter(e.target.value)}>\n                                <option value=\"all\">Tutti</option>\n                                <option value=\"pending\">ðŸŸ¡ In Attesa</option>\n                                <option value=\"confirmed\">ðŸŸ¢ Confermati</option>\n                            </select>\n                        </div>\n\n                        <div className=\"card\" style={{ padding: 0, overflow: 'hidden' }}>\n                            <table>\n                                <thead>\n                                    <tr style={{ background: '#f8fafc', textAlign: 'left' }}>\n                                        <th style={{ padding: '1rem' }}>Paziente</th>\n                                        <th style={{ padding: '1rem' }}>Data</th>\n                                        <th style={{ padding: '1rem' }}>Stato</th>\n                                        <th style={{ padding: '1rem' }}>Azioni</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {filteredAppts.map((app) => (\n                                        <tr key={app.appointment_id} style={{ borderBottom: '1px solid #f1f5f9' }}>\n                                            <td style={{ padding: '1rem', fontWeight: 'bold', color: '#2563eb' }}>{app.patient_name}</td>\n                                            <td style={{ padding: '1rem' }}>{app.date} <br /><small>{app.time_slot}</small></td>\n                                            <td style={{ padding: '1rem' }}><span className={`badge ${app.status}`}>{app.status}</span></td>\n                                            <td style={{ padding: '1rem' }}>\n                                                {app.status === 'pending' && (\n                                                    <><button className=\"btn-success\" onClick={() => updateStatus(app.appointment_id, 'confirmed')}>âœ“</button>\n                                                        <button className=\"btn-danger\" onClick={() => updateStatus(app.appointment_id, 'rejected')}>âœ—</button></>\n                                                )}\n                                                {app.status === 'confirmed' && (\n                                                    <button className=\"btn-primary\" onClick={() => setUploadModal(app)}>Carica Referto</button>\n                                                )}\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    </>\n                )}\n\n                {view === 'profile' && <UserProfile user={user} />}\n\n            </div>\n\n            {/* MODALE UPLOAD */}\n            {uploadModal && (\n                <div style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0,0,0,0.5)', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                    <div className=\"card\" style={{ width: '500px', padding: '2rem' }}>\n                        <h3>Carica Referto per {uploadModal.patient_name}</h3>\n                        <UploadForm appointment={uploadModal} onClose={() => setUploadModal(null)} />\n                        <button onClick={() => setUploadModal(null)} style={{ marginTop: '1rem', background: 'none', border: 'none', color: '#666', cursor: 'pointer' }}>Chiudi</button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n\nfunction UploadForm({ appointment, onClose }) {\n    const [file, setFile] = useState(null);\n    const [notes, setNotes] = useState('');\n\n    const handleUpload = async (e) => {\n        e.preventDefault();\n        const data = new FormData();\n        data.append('file', file);\n        const query = new URLSearchParams({\n            appointment_id: appointment.appointment_id,\n            exam_type: 'Visita Specialistica',\n            exam_date: new Date().toISOString().split('T')[0],\n            notes: notes\n        }).toString();\n\n        try {\n            await axios.post(`${API_URL}/api/reports/upload?${query}`, data);\n            toast.success(\"Referto caricato!\");\n            onClose();\n        } catch (err) { toast.error(\"Errore upload\"); }\n    };\n\n    return (\n        <form onSubmit={handleUpload} style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n            <input type=\"file\" onChange={e => setFile(e.target.files[0])} required />\n            <textarea placeholder=\"Note cliniche...\" value={notes} onChange={e => setNotes(e.target.value)} style={{ width: '100%', padding: '10px', border: '1px solid #ddd' }} />\n            <button type=\"submit\" className=\"btn-primary\">Carica PDF</button>\n        </form>\n    );\n}\n\nfunction StatCard({ title, value, icon }) {\n    return (\n        <div className=\"card\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n            <div><p style={{ color: '#64748b', fontSize: '0.9rem' }}>{title}</p><h3 style={{ fontSize: '1.5rem', margin: 0 }}>{value}</h3></div>\n            <div style={{ fontSize: '1.5rem', color: '#2563eb' }}>{icon}</div>\n        </div>\n    );\n}\n\n// ============================================\n// 3. DASHBOARD PAZIENTE\n// ============================================\n\nfunction PatientDashboard({ user, onLogout }) {\n    const [view, setView] = useState('appointments');\n\n    return (\n        <div className=\"dashboard\">\n            <nav className=\"navbar\">\n                <div className=\"brand\" style={{ color: '#16a34a' }}><Activity /> Area Paziente</div>\n                <div className=\"user-menu\"><span>{user.name}</span><button onClick={onLogout}>Esci</button></div>\n            </nav>\n\n            <div className=\"container\">\n                <div className=\"tabs\">\n                    <button className={view === 'appointments' ? 'active' : ''} onClick={() => setView('appointments')}>I miei Appuntamenti</button>\n                    <button className={view === 'book' ? 'active' : ''} onClick={() => setView('book')}>Prenota Visita</button>\n                    <button className={view === 'reports' ? 'active' : ''} onClick={() => setView('reports')}>I miei Referti</button>\n                    <button className={view === 'profile' ? 'active' : ''} onClick={() => setView('profile')}>Profilo</button>\n                </div>\n\n                {view === 'appointments' && <PatientAppointments />}\n                {view === 'book' && <BookAppointment onSuccess={() => setView('appointments')} />}\n                {view === 'reports' && <PatientReports />}\n                {view === 'profile' && <UserProfile user={user} />}\n            </div>\n        </div>\n    );\n}\n\nfunction PatientAppointments() {\n    const [appointments, setAppointments] = useState([]);\n    useEffect(() => { axios.get(`${API_URL}/api/appointments/my`).then(res => setAppointments(res.data)); }, []);\n\n    const cancel = async (id) => {\n        if (window.confirm(\"Cancellare?\")) {\n            await axios.delete(`${API_URL}/api/appointments/${id}`);\n            const res = await axios.get(`${API_URL}/api/appointments/my`);\n            setAppointments(res.data);\n            toast.info(\"Cancellato\");\n        }\n    }\n\n    return (\n        <div className=\"card-grid\">\n            {appointments.length === 0 && <p>Nessun appuntamento.</p>}\n            {appointments.map(a => (\n                <div key={a.appointment_id} className=\"card\">\n                    <h3>{a.doctor_name}</h3>\n                    <p style={{ color: '#666' }}>{a.specialization}</p>\n                    <p>ðŸ“… {a.date} ore {a.time_slot}</p>\n                    <span className={`badge ${a.status}`}>{a.status}</span>\n                    {a.status === 'pending' && <button className=\"btn-danger\" style={{ marginTop: '10px', width: '100%' }} onClick={() => cancel(a.appointment_id)}>Cancella</button>}\n                </div>\n            ))}\n        </div>\n    );\n}\n\nfunction BookAppointment({ onSuccess }) {\n    const [spec, setSpec] = useState('');\n    const [doctors, setDoctors] = useState([]);\n    const [selectedDoc, setSelectedDoc] = useState('');\n    const [date, setDate] = useState('');\n    const [slots, setSlots] = useState([]);\n    const [selectedSlot, setSelectedSlot] = useState('');\n    const [reason, setReason] = useState('');\n\n    useEffect(() => { if (spec) axios.get(`${API_URL}/api/doctors?specialization=${spec}`).then(res => setDoctors(res.data)); }, [spec]);\n    useEffect(() => { if (selectedDoc && date) axios.get(`${API_URL}/api/doctors/${selectedDoc}/availability?date=${date}`).then(res => setSlots(res.data.available_slots)); }, [selectedDoc, date]);\n\n    const submit = async (e) => {\n        e.preventDefault();\n        try {\n            await axios.post(`${API_URL}/api/appointments`, { doctor_id: selectedDoc, date, time_slot: selectedSlot, reason });\n            toast.success(\"Prenotato!\");\n            onSuccess();\n        } catch (e) { toast.error(\"Errore\"); }\n    };\n\n    return (\n        <div className=\"form-box\">\n            <h2>Nuova Prenotazione</h2>\n            <form onSubmit={submit}>\n                <label>Specializzazione</label>\n                <select onChange={e => setSpec(e.target.value)} defaultValue=\"\">\n                    <option value=\"\" disabled>Seleziona Specializzazione...</option>\n                    {SPECIALIZATIONS.map(s => <option key={s} value={s}>{s}</option>)}\n                </select>\n\n                {spec && (\n                    <>\n                        <label>Medico</label>\n                        <select onChange={e => setSelectedDoc(e.target.value)} defaultValue=\"\">\n                            <option value=\"\" disabled>Seleziona Medico...</option>\n                            {doctors.map(d => <option key={d.user_id} value={d.user_id}>{d.name} {d.surname}</option>)}\n                        </select>\n                    </>\n                )}\n\n                {selectedDoc && <><label>Data</label><input type=\"date\" onChange={e => setDate(e.target.value)} /></>}\n                {date && (\n                    <div className=\"slots-grid\">\n                        {slots.length > 0 ? slots.map(s => <div key={s} className={`slot ${selectedSlot === s ? 'selected' : ''}`} onClick={() => setSelectedSlot(s)}>{s}</div>)\n                            : <p>Nessun posto disponibile.</p>}\n                    </div>\n                )}\n                {selectedSlot && <><label>Motivo</label><input placeholder=\"Motivo visita\" onChange={e => setReason(e.target.value)} /><button className=\"btn-primary\" style={{ marginTop: '10px' }}>Conferma</button></>}\n            </form>\n        </div>\n    );\n}\n\nfunction PatientReports() {\n    const [reports, setReports] = useState([]);\n    useEffect(() => { axios.get(`${API_URL}/api/reports/my`).then(res => setReports(res.data)); }, []);\n\n    const download = (id, name) => {\n        axios.get(`${API_URL}/api/reports/${id}/download`, { responseType: 'blob' })\n            .then(res => {\n                const url = window.URL.createObjectURL(new Blob([res.data]));\n                const link = document.createElement('a');\n                link.href = url; link.setAttribute('download', name);\n                document.body.appendChild(link); link.click();\n            });\n    };\n\n    return (\n        <div className=\"card-grid\">\n            {reports.length === 0 && <p>Nessun referto disponibile.</p>}\n            {reports.map(r => (\n                <div key={r.report_id} className=\"card\">\n                    <h3>ðŸ“„ {r.exam_type}</h3>\n                    <p>Medico: {r.doctor_name}</p>\n                    <p>Data: {r.exam_date}</p>\n                    <button className=\"btn-primary\" onClick={() => download(r.report_id, r.original_filename)}>Scarica PDF</button>\n                </div>\n            ))}\n        </div>\n    );\n}\n\n// ============================================\n// 4. PROFILO E CAMBIO PASSWORD\n// ============================================\n\nfunction UserProfile({ user }) {\n    const [passData, setPassData] = useState({ old_password: '', new_password: '', confirm_password: '' });\n    const [loading, setLoading] = useState(false);\n\n    const handleChangePass = async (e) => {\n        e.preventDefault();\n\n        if (passData.new_password !== passData.confirm_password) {\n            toast.error(\"Le nuove password non coincidono!\");\n            return;\n        }\n        if (passData.new_password.length < 6) {\n            toast.error(\"La password deve essere di almeno 6 caratteri\");\n            return;\n        }\n\n        setLoading(true);\n        try {\n            await axios.post(`${API_URL}/api/users/change-password`, {\n                old_password: passData.old_password,\n                new_password: passData.new_password\n            });\n            toast.success(\"Password cambiata con successo!\");\n            setPassData({ old_password: '', new_password: '', confirm_password: '' });\n        } catch (err) {\n            toast.error(getErrorMessage(err));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(350px, 1fr))', gap: '2rem' }}>\n\n            {/* COLONNA 1: DATI UTENTE */}\n            <div className=\"card\">\n                <h3 style={{ marginBottom: '1.5rem', display: 'flex', alignItems: 'center', gap: '10px' }}>\n                    <User size={20} /> I Miei Dati\n                </h3>\n\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '15px' }}>\n                    <div>\n                        <label style={{ fontSize: '0.85rem', color: '#64748b', fontWeight: 'bold' }}>Nome e Cognome</label>\n                        <input type=\"text\" value={`${user.name} ${user.surname}`} disabled style={{ background: '#f1f5f9', cursor: 'not-allowed', border: '1px solid #e2e8f0' }} />\n                    </div>\n                    <div>\n                        <label style={{ fontSize: '0.85rem', color: '#64748b', fontWeight: 'bold' }}>Email</label>\n                        <input type=\"text\" value={user.email} disabled style={{ background: '#f1f5f9', cursor: 'not-allowed', border: '1px solid #e2e8f0' }} />\n                    </div>\n                    <div>\n                        <label style={{ fontSize: '0.85rem', color: '#64748b', fontWeight: 'bold' }}>Telefono</label>\n                        <input type=\"text\" value={user.phone} disabled style={{ background: '#f1f5f9', cursor: 'not-allowed', border: '1px solid #e2e8f0' }} />\n                    </div>\n                    <div>\n                        <label style={{ fontSize: '0.85rem', color: '#64748b', fontWeight: 'bold' }}>Ruolo</label>\n                        <div style={{ padding: '10px', background: '#f1f5f9', borderRadius: '8px', border: '1px solid #e2e8f0', color: '#64748b' }}>\n                            {user.role === 'doctor' ? `Medico - ${user.specialization}` : 'Paziente'}\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* COLONNA 2: CAMBIO PASSWORD */}\n            <div className=\"card\">\n                <h3 style={{ marginBottom: '1.5rem', display: 'flex', alignItems: 'center', gap: '10px' }}>\n                    <Lock size={20} /> Sicurezza\n                </h3>\n                <form onSubmit={handleChangePass}>\n                    <label style={{ fontWeight: '500' }}>Vecchia Password</label>\n                    <input\n                        type=\"password\"\n                        placeholder=\"Inserisci la password attuale\"\n                        value={passData.old_password}\n                        onChange={e => setPassData({ ...passData, old_password: e.target.value })}\n                        required\n                    />\n\n                    <label style={{ fontWeight: '500' }}>Nuova Password</label>\n                    <input\n                        type=\"password\"\n                        placeholder=\"Minimo 6 caratteri\"\n                        value={passData.new_password}\n                        onChange={e => setPassData({ ...passData, new_password: e.target.value })}\n                        required\n                    />\n\n                    <label style={{ fontWeight: '500' }}>Conferma Password</label>\n                    <input\n                        type=\"password\"\n                        placeholder=\"Ripeti la nuova password\"\n                        value={passData.confirm_password}\n                        onChange={e => setPassData({ ...passData, confirm_password: e.target.value })}\n                        required\n                    />\n\n                    <button type=\"submit\" className=\"btn-primary\" disabled={loading} style={{ marginTop: '10px' }}>\n                        {loading ? 'Aggiornamento...' : 'Aggiorna Password'}\n                    </button>\n                </form>\n            </div>\n        </div>\n    );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}